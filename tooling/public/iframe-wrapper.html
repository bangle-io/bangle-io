<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      html,
      body {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script>
      window.addEventListener('message', (event) => {
        console.log('wrapper: received event', event);
        const innerFrameElement = document.getElementById(
          'bangle-io-extension-iframe',
        );
        if (
          innerFrameElement &&
          event.source === innerFrameElement.contentWindow
        ) {
          parent.postMessage(event.data, window.location.origin);
        } else if (innerFrameElement && event.source === parent) {
          console.log('wrapper: parent sent a message', event.data);
          document
            .getElementById('bangle-io-extension-iframe')
            ?.contentWindow.postMessage(event.data, '*');
        } else {
          console.warn('untrusted event');
        }
        console.log(
          'wrapper: frame',
          document.getElementsByTagName('iframe')?.[0],
        );
      });
    </script>
  </head>
  <body></body>
</html>
